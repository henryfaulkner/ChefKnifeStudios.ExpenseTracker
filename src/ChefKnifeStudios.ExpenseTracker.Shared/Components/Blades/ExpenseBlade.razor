@using MatBlazor
@using ChefKnifeStudios.ExpenseTracker.Shared.DTOs

<div class="expense-blade">
    <BladeContainer @ref="_bladeContainer">
        <ContentFragment>
            <MatH4 class="clr-on-1t-container">
                Expense
            </MatH4>

            @if (_isLoading)
            {
                <MatProgressCircle Indeterminate="true" Size="MatProgressCircleSize.Large" />
            }
            else
            {
                <form>
                    <MatTextField 
                        @bind-Value="@_name" 
                        Label="Choose a Name" 
                        Icon="create" 
                        Required="true" 
                    />
                    <MatTextField 
                        @bind-Value="@_cost" 
                        Label="Apply a Cost" 
                        Icon="attach_money" 
                        Required="true" 
                    />
                    <MatAutocompleteList 
                        Items="_budgets"
                        Icon="list"
                        TItem="BudgetDTO"
                        CustomStringSelector="@(x => x?.Name)"
                        @bind-Value="@_selectedBudget"
                        Label="Pick a Budget" 
                    />

                    <MatButton 
                        OnClick="HandleSubmitPressedAsync"
                        Unelevated="true"
                        Label="SUBMIT"
                    />
                </form>
            }

            <hr />
            
            <div class="btns">
                <MatButton 
                    OnClick="@HandlePickPictureAsync"
                    Unelevated="true"
                    Label="PICK PHOTO"
                           Icon="insert_photo" />

                <MatButton
                    OnClick="@HandleTakePictureAsync"
                    Unelevated="true"
                    Label="CAPTURE PHOTO"
                    Icon="add_a_photo"
                />

                <MatButton
                    OnClick="@HandleStartListeningAsync"
                    Unelevated="true"
                    Label="TELL ME"
                    Icon="mic"
                />

                <MatButton
                    OnClick="@HandleStopListeningAsync"
                    Unelevated="true"
                    Label="STOP LISTENING"
                    Icon="mic_off"
                />
            </div>
        </ContentFragment>
    </BladeContainer>
</div>